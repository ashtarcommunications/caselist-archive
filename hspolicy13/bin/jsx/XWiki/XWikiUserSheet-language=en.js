var XWiki=(function(b){Object.extend(b,{userprofile:{init:function(){this.crtCategory="";this.tabsContainer=$("user-vertical-menu");if(!this.tabsContainer){return}this.tabsContainer.select(".category-tab").each(function(c){c.observe("click",function(d){Event.stop(d);this.switchTab(c.id)}.bindAsEventListener(this))}.bind(this));this.tabsContainer.select(".category-tab.current").each(function(c){this.updateCategoryFields(c.id);document.fire("xwiki:profile:switchedCategory",{category:c.id})}.bind(this));this.handleCancelAction()},switchTab:function(c){var d=c.substring(14);$("user-page-content").select("div.user-page-pane").each(function(e){e.addClassName("hidden")});$(d+"Pane").removeClassName("hidden");$("user-vertical-menu").select("span.category-tab").each(function(e){e.removeClassName("current")});$(c).addClassName("current");this.updateCategoryFields(c);document.fire("xwiki:profile:switchedCategory",{category:c})},updateCategoryFields:function(c){c=c.substring(14);this.crtCategory=c;this.updateField("xredirect",b.currentDocument.getURL("view","category="+c));this.updateField("xcontinue",b.currentDocument.getURL("edit","editor=inline&category="+c));this.updateField("category",c)},updateField:function(e,d){var c=$$("input[name="+e+"]");if(c&&c.size()>0){c[0].value=d}},handleCancelAction:function(){var d=$$("form .buttons input[type=submit][name=action_cancel]");if(d&&d.size()>0){var c=d[0];Event.stopObserving(c,"click");c.observe("click",function(e){e.stop();window.location=b.currentDocument.getURL("view","category="+this.crtCategory)}.bindAsEventListener(this))}}}});var a=function(){b.userprofile.init();return true};(b.domIsLoaded&&a())||document.observe("xwiki:dom:loaded",a);document.observe("lightbox:userprofile:loaded",a);return b}(XWiki||{}));