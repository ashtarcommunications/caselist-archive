if(typeof XWiki=="undefined"){XWiki=new Object()}if(typeof XWiki.index=="undefined"){XWiki.index=new Object()}if(typeof XWiki.index.trash=="undefined"){XWiki.index.trash=new Object()}if(typeof XWiki.index.trash.documents=="undefined"){XWiki.index.trash.documents=new Object()}XWiki.index.trash.documents.displayEntry=function(j,c,h){var g=new Element("tr");var e=new Element("a",{href:j.url}).update(j.fullname);g.appendChild(new Element("td").update(e));g.appendChild(new Element("td").update(j.title));g.appendChild(new Element("td").update(j.date));var d=new Element("a",{href:j.deleterurl}).update(j.deletername);g.appendChild(new Element("td").update(d));var b=new Element("td",{"class":"itemActions"});if(!j.alreadyExists){if(j.canRestore){var f=new Element("a",{href:j.restoreUrl,"class":"tool restore",title:"Restore document"}).update("[restore]");b.appendChild(f)}}else{var f=new Element("a",{href:j.originalUrl,"class":"tool cannot-restore",title:"The document cannot be restored to its original location because it has been recreated"}).update("[cannot restore]");b.appendChild(f)}if(j.canDelete){var a=new Element("a",{href:j.deleteUrl,"class":"tool delete",title:"Permanently delete document"}).update("[delete]");b.appendChild(document.createTextNode(" "));b.appendChild(a);a.observe("click",XWiki.index.trash.documents.confirmDelete.bindAsEventListener(a,h,c))}g.appendChild(b);return g};XWiki.index.trash.documents.confirmDelete=function(c,b,a){c.stop();if(this.disabled){return}else{new XWiki.widgets.ConfirmedAjaxRequest(this.href+"&confirm=1"+(Prototype.Browser.Opera?"":"&ajax=1"),{onCreate:function(){this.disabled=true}.bind(this),onSuccess:function(e,d){e.deleteRow(d)}.bind(this,b,a),on404:function(d,f,e){d.request.options.onSuccess(f,e)}.bindAsEventListener(this,b,a),onComplete:function(){this.disabled=false}.bind(this)},{confirmationText:"This action is not reversible. Are you sure you wish to continue?",progressMessageText:"Permanently deleting document...",successMessageText:"Document permanently deleted",failureMessageText:"Failed to delete: "})}};document.observe("xwiki:dom:loaded",function(){if($("documentsTrash")){$("documentsTrash").up(".hidden").removeClassName("hidden")}});